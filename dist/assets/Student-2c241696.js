/* empty css             *//* empty css               *//* empty css                    *//* empty css                  *//* empty css              *//* empty css              *//* empty css                  *//* empty css               */import{r as _}from"./request-accbcdb0.js";/* empty css               *//* empty css                */import{l as V,D as P,o as q,c as T,a as u,b as l,d as y,w as t,m as R,n as F,q as O,s as $,v as A,x,j as i,y as f,z as G,A as I,B as J,F as j,G as H,H as K,C as L}from"./index-95a72e1c.js";const Q={class:"card",style:{"margin-bottom":"10px"}},W={class:"card",style:{"margin-bottom":"10px"}},X={style:{"margin-bottom":"10px"}},Z={class:"card"},ee={class:"dialog-footer"},g="/student",ge={__name:"Student",setup(le){const e=V({username:"",name:"",tableData:[],total:0,pageNum:1,pageSize:5,formVisible:!1,form:{}}),p=()=>{_.get(g+"/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,username:e.username,name:e.name}}).then(n=>{var o,r;e.tableData=((o=n.data)==null?void 0:o.list)||[],e.total=((r=n.data)==null?void 0:r.total)||0})};p();const w=()=>{p()},v=()=>{e.username="",e.name="",p()},C=V({username:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),b=P(),k=()=>{e.form={},e.formVisible=!0},E=()=>{b.value.validate(n=>{n&&_.request({url:e.form.id?g+"/update":g+"/add",method:e.form.id?"PUT":"POST",data:e.form}).then(o=>{o.code==="200"?(p(),e.formVisible=!1,f.success("操作成功")):f.error(o.msg)})})},h=n=>{e.form=JSON.parse(JSON.stringify(n)),e.formVisible=!0},U=n=>{G.confirm("删除数据后无法恢复，您确认删除吗？","删除确认",{type:"warning"}).then(o=>{_.delete(g+"/delete/"+n).then(r=>{r.code==="200"?(p(),f.success("操作成功")):f.error(r.msg)})}).catch(o=>{})};return(n,o)=>{const r=R,s=F,m=I,D=O,N=$,d=J,c=j,S=H,z=K,Y=L,B=A;return q(),T("div",null,[u("div",Q,[l(r,{style:{width:"260px","margin-right":"10px"},modelValue:e.username,"onUpdate:modelValue":o[0]||(o[0]=a=>e.username=a),placeholder:"请输入账号查询","prefix-icon":y(x)},null,8,["modelValue","prefix-icon"]),l(r,{style:{width:"260px","margin-right":"10px"},modelValue:e.name,"onUpdate:modelValue":o[1]||(o[1]=a=>e.name=a),placeholder:"请输入名称查询","prefix-icon":y(x)},null,8,["modelValue","prefix-icon"]),l(s,{type:"primary",style:{"margin-left":"10px"},onClick:p},{default:t(()=>[i("查询")]),_:1}),l(s,{type:"info",onClick:v},{default:t(()=>[i("重置")]),_:1})]),u("div",W,[u("div",X,[l(s,{type:"primary",onClick:k},{default:t(()=>[i("新增")]),_:1})]),u("div",null,[l(D,{data:e.tableData,style:{width:"100%"}},{default:t(()=>[l(m,{prop:"id",label:"序号",width:"70"}),l(m,{prop:"username",label:"学生账号"}),l(m,{prop:"name",label:"学生名称"}),l(m,{prop:"phone",label:"学生手机号"}),l(m,{prop:"email",label:"学生邮箱"}),l(m,{prop:"sex",label:"性别"}),l(m,{prop:"birth",label:"生日"}),l(m,{label:"操作",width:"180"},{default:t(a=>[l(s,{type:"primary",onClick:M=>h(a.row)},{default:t(()=>[i("编辑")]),_:2},1032,["onClick"]),l(s,{type:"danger",onClick:M=>U(a.row.id)},{default:t(()=>[i("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])]),u("div",Z,[l(N,{"current-page":e.pageNum,"onUpdate:currentPage":o[2]||(o[2]=a=>e.pageNum=a),"page-size":e.pageSize,"onUpdate:pageSize":o[3]||(o[3]=a=>e.pageSize=a),onCurrentChange:w,background:"",layout:"prev, pager, next",total:e.total},null,8,["current-page","page-size","total"])]),l(B,{width:"35%",modelValue:e.formVisible,"onUpdate:modelValue":o[12]||(o[12]=a=>e.formVisible=a),title:"学生信息","destroy-on-close":""},{footer:t(()=>[u("span",ee,[l(s,{onClick:o[11]||(o[11]=a=>e.formVisible=!1)},{default:t(()=>[i("取 消")]),_:1}),l(s,{type:"primary",onClick:E},{default:t(()=>[i("保 存")]),_:1})])]),default:t(()=>[l(Y,{model:e.form,rules:C,ref_key:"formRef",ref:b,"label-width":"100px","label-position":"right",style:{"padding-right":"40px"}},{default:t(()=>[l(d,{label:"学生账号",prop:"username"},{default:t(()=>[l(r,{modelValue:e.form.username,"onUpdate:modelValue":o[4]||(o[4]=a=>e.form.username=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(d,{label:"学生密码",prop:"password"},{default:t(()=>[l(r,{"show-password":"",modelValue:e.form.password,"onUpdate:modelValue":o[5]||(o[5]=a=>e.form.password=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(d,{label:"学生名称"},{default:t(()=>[l(r,{modelValue:e.form.name,"onUpdate:modelValue":o[6]||(o[6]=a=>e.form.name=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(d,{label:"手机号"},{default:t(()=>[l(r,{modelValue:e.form.phone,"onUpdate:modelValue":o[7]||(o[7]=a=>e.form.phone=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(d,{label:"邮箱"},{default:t(()=>[l(r,{modelValue:e.form.email,"onUpdate:modelValue":o[8]||(o[8]=a=>e.form.email=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(d,{label:"性别"},{default:t(()=>[l(S,{modelValue:e.form.sex,"onUpdate:modelValue":o[9]||(o[9]=a=>e.form.sex=a)},{default:t(()=>[l(c,{label:"男"}),l(c,{label:"女"})]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"生日"},{default:t(()=>[l(z,{style:{width:"100%"},format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",modelValue:e.form.birth,"onUpdate:modelValue":o[10]||(o[10]=a=>e.form.birth=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}};export{ge as default};
