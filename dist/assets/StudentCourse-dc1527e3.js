/* empty css             *//* empty css               *//* empty css                    *//* empty css                  *//* empty css              *//* empty css               *//* empty css                  *//* empty css               *//* empty css                */import{r as c}from"./request-d38d9af2.js";import{l as w,o as f,c as S,a as p,b as a,d as _,w as l,m as z,n as I,q as U,s as B,v as D,x as b,j as s,e as T,f as M,z as P,y as u,A as $,B as q,C as A}from"./index-6e2e5138.js";const j={class:"card",style:{"margin-bottom":"10px"}},G={class:"card",style:{"margin-bottom":"10px"}},J={class:"card"},O={class:"dialog-footer"},oe={__name:"StudentCourse",setup(H){const e=w({name:"",no:"",tableData:[],total:0,pageNum:1,pageSize:5,user:JSON.parse(localStorage.getItem("student-user")||"{}"),gradeForm:{},formVisible:!1}),m=()=>{let n={pageNum:e.pageNum,pageSize:e.pageSize,name:e.name,no:e.no};e.user.role==="STUDENT"&&(n.studentId=e.user.id),c.get("/studentCourse/selectPage",{params:n}).then(t=>{var r,d;e.tableData=((r=t.data)==null?void 0:r.list)||[],e.total=((d=t.data)==null?void 0:d.total)||0})};m();const V=()=>{m()},x=()=>{e.name="",e.no="",m()},y=n=>{P.confirm("删除数据后无法恢复，您确认删除吗？","删除确认",{type:"warning"}).then(t=>{c.delete("/studentCourse/delete/"+n).then(r=>{r.code==="200"?(m(),u.success("操作成功")):u.error(r.msg)})}).catch(t=>{})},C=n=>{e.formVisible=!0,e.gradeForm.name=n.name,e.gradeForm.courseId=n.courseId,e.gradeForm.studentId=n.studentId},F=()=>{c.post("/grade/add",e.gradeForm).then(n=>{n.code==="200"?(e.formVisible=!1,u.success("操作成功")):u.error(n.msg)})};return(n,t)=>{const r=z,d=I,i=$,k=U,N=B,g=q,v=A,E=D;return f(),S("div",null,[p("div",j,[a(r,{style:{width:"260px","margin-right":"10px"},modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=o=>e.name=o),placeholder:"请输入课程名称查询","prefix-icon":_(b)},null,8,["modelValue","prefix-icon"]),a(r,{style:{width:"260px","margin-right":"10px"},modelValue:e.no,"onUpdate:modelValue":t[1]||(t[1]=o=>e.no=o),placeholder:"请输入课程编号查询","prefix-icon":_(b)},null,8,["modelValue","prefix-icon"]),a(d,{type:"primary",style:{"margin-left":"10px"},onClick:m},{default:l(()=>[s("查询")]),_:1}),a(d,{type:"info",onClick:x},{default:l(()=>[s("重置")]),_:1})]),p("div",G,[p("div",null,[a(k,{data:e.tableData,style:{width:"100%"}},{default:l(()=>[a(i,{prop:"id",label:"序号",width:"70"}),a(i,{prop:"name",label:"课程名称"}),a(i,{prop:"no",label:"课程编号"}),a(i,{prop:"studentName",label:"学生名称"}),a(i,{label:"操作",width:"180"},{default:l(o=>[a(d,{type:"danger",onClick:h=>y(o.row.id)},{default:l(()=>[s("删除")]),_:2},1032,["onClick"]),e.user.role==="ADMIN"?(f(),T(d,{key:0,type:"primary",onClick:h=>C(o.row)},{default:l(()=>[s("打分")]),_:2},1032,["onClick"])):M("",!0)]),_:1})]),_:1},8,["data"])])]),p("div",J,[a(N,{"current-page":e.pageNum,"onUpdate:currentPage":t[2]||(t[2]=o=>e.pageNum=o),"page-size":e.pageSize,"onUpdate:pageSize":t[3]||(t[3]=o=>e.pageSize=o),onCurrentChange:V,background:"",layout:"prev, pager, next",total:e.total},null,8,["current-page","page-size","total"])]),a(E,{width:"35%",modelValue:e.formVisible,"onUpdate:modelValue":t[8]||(t[8]=o=>e.formVisible=o),title:"成绩信息"},{footer:l(()=>[p("span",O,[a(d,{onClick:t[7]||(t[7]=o=>e.formVisible=!1)},{default:l(()=>[s("取 消")]),_:1}),a(d,{type:"primary",onClick:F},{default:l(()=>[s("保 存")]),_:1})])]),default:l(()=>[a(v,{model:e.gradeForm,"label-width":"100px","label-position":"right",style:{"padding-right":"40px"}},{default:l(()=>[a(g,{label:"课程名称"},{default:l(()=>[a(r,{modelValue:e.gradeForm.name,"onUpdate:modelValue":t[4]||(t[4]=o=>e.gradeForm.name=o),autocomplete:"off",disabled:""},null,8,["modelValue"])]),_:1}),a(g,{label:"分数"},{default:l(()=>[a(r,{modelValue:e.gradeForm.score,"onUpdate:modelValue":t[5]||(t[5]=o=>e.gradeForm.score=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(g,{label:"评语"},{default:l(()=>[a(r,{type:"textarea",modelValue:e.gradeForm.comment,"onUpdate:modelValue":t[6]||(t[6]=o=>e.gradeForm.comment=o),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}};export{oe as default};
